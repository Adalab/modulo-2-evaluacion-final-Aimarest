"use strict";const inputSearch=document.querySelector(".js-searchInput"),buttonSearch=document.querySelector(".js-button"),resetButton=document.querySelector(".js-reset"),drinksList=document.querySelector(".js-drinkList"),urlApi="www.thecocktaildb.com/api/json/v1/1/search.php?s=",header=document.querySelector(".js-title"),listOfFavourites=document.querySelector(".js-favourites");let favourites=[],classFavorite="";function handleClickSearch(){const e=inputSearch.value;let t=[];function i(e,t,r){let s="",n=0;for(const t of e){s+=`<li class="drink js-drink ${r?"Drink__favourite":""}" ${r?"":"id="+t.id}>`,s+='<div class="drink__container">',s+=`<h2 class= "drink__title"> ${t.name}</h2>`,r&&(s+=`<button class= "drink__action" id="fav-${n}"> Eliminar </button>`),s+=`<img class= "drink__image" src="${t.image}"/>`,s+="</div>",s+="</li>",n++}if(t.innerHTML=s,r)for(let e=0;e<n;e++)document.getElementById("fav-"+e).addEventListener("click",()=>{const t=favourites.splice(e,1);document.getElementById(t[0].id).classList.remove("Drink__favourite"),i(favourites,listOfFavourites,!0)})}fetch(`https://${urlApi}${e}`).then(e=>e.json()).then(e=>{if(null===e.drinks)return void(drinksList.innerHTML="<p class=error> Oups! No existen bebidas con tu b√∫squeda</p>");t=e.drinks;const r=t.map(e=>({name:e.strDrink,id:e.idDrink,image:e.strDrinkThumb}));i(r,drinksList,!1);for(const e of r){const t=document.getElementById(e.id);t.addEventListener("click",(function(){const r=favourites.findIndex(t=>t.id===e.id);-1===r?(favourites.push(e),t.classList.add("Drink__favourite")):(favourites.splice(r,1),t.classList.remove("Drink__favourite")),i(favourites,listOfFavourites,!0),localStorage.setItem("favourites",JSON.stringify(favourites))}))}JSON.parse(localStorage.getItem("favourites"))})}const coctelStorage=JSON.parse(localStorage.getItem("favourites"));function resetFilter(e){e.preventDefault(),drinksList.innerHTML="",inputSearch.value="",listOfFavourites.innerHTML="",favourites=[],window.localStorage.clear()}localStorage.setItem("favourites",JSON.stringify(listOfFavourites)),buttonSearch.addEventListener("click",handleClickSearch),resetButton.addEventListener("click",resetFilter);